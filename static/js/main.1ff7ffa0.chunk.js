(this.webpackJsonpassignment=this.webpackJsonpassignment||[]).push([[0],{21:function(e,t,a){e.exports=a(39)},26:function(e,t,a){},32:function(e,t){},33:function(e,t){},34:function(e,t){},35:function(e,t){},36:function(e,t){},37:function(e,t){},39:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a.n(n),o=a(19),r=a.n(o),s=a(7),c=a(8),l=a(11),d=a(9),g=a(12),m=(a(26),window.cv);function h(e,t,a){console.log(m),this.image=document.getElementById(e),this.file=document.getElementById(t),this.canvas=a}h.prototype.addListener=function(){this.file.addEventListener("change",this.loadData.bind(this),!1)},h.prototype.loadData=function(e){e.target.files[0]&&(this.image.src=URL.createObjectURL(e.target.files[0]),this.loadImageToCanvas())},h.prototype.removeListener=function(){this.file.removeEventListener("change",this.loadData.bind(this),!1)},h.prototype.negativeCanvas=function(){this.loadOriginalCanvas();for(var e=document.getElementById("image_canvas"),t=e.getContext("2d"),a=t.getImageData(0,0,e.width,e.height),n=a.data,i=0;i<n.length;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2];t.putImageData(a,0,0)},h.prototype.logTransform=function(){this.loadOriginalCanvas();for(var e=document.getElementById("image_canvas"),t=e.getContext("2d"),a=t.getImageData(0,0,e.width,e.height),n=a.data,i=0;i<n.length;i+=4)n[i]=200*Math.log10(n[i]+1),n[i+1]=200*Math.log10(n[i+1]+1),n[i+2]=200*Math.log10(n[i+2]+1);t.putImageData(a,0,0)},h.prototype.flip=function(e,t){var a=document.getElementById("image_canvas"),n=a.getContext("2d"),i=(n.getImageData(0,0,a.width,a.height),a.width),o=a.height,r=e?-1:1,s=t?-1:1,c=e?-1*i:0,l=t?-1*o:0;n.save(),n.scale(r,s),n.drawImage(this.image,c,l,i,o),n.restore()},h.prototype.contrastCanvas=function(e){this.loadOriginalCanvas();for(var t=e,a=document.getElementById("image_canvas"),n=a.getContext("2d"),i=n.getImageData(0,0,a.width,a.height),o=i.data,r=128*(1-(t=t/100+1)),s=0;s<o.length;s+=4)o[s]=o[s]*t+r,o[s+1]=o[s+1]*t+r,o[s+2]=o[s+2]*t+r;n.putImageData(i,0,0)},h.prototype.brightnessCanvas=function(e){this.loadOriginalCanvas();var t=document.getElementById("image_canvas"),a=t.getContext("2d"),n=a.getImageData(0,0,t.width,t.height);a.filter="brightness(".concat(e,"%)"),a.putImageData(n,0,0)},h.prototype.loadImageToCanvas=function(){this.image.onload=function(){var e=document.getElementById("image_canvas");e.getContext("2d").drawImage(this,0,0,e.width,e.height)}},h.prototype.loadOriginalCanvas=function(){var e=document.getElementById("image_canvas");e.getContext("2d").drawImage(this.image,0,0,e.width,e.height)},h.prototype.grayscale=function(){var e=m.imread(this.image);m.cvtColor(e,e,m.COLOR_RGB2GRAY),m.imshow("image_canvas",e),e.delete()},h.prototype.filter=function(){var e=m.imread(this.image),t=new m.Mat,a=m.Mat.eye(3,3,m.CV_32FC1),n=new m.Point(-1,-1);m.filter2D(e,t,m.CV_8U,a,n,0,m.BORDER_DEFAULT),m.imshow("image_canvas",t),e.delete(),t.delete(),a.delete()},h.prototype.cannyEdgeDetection=function(){this.loadOriginalCanvas();var e=m.imread(this.image),t=new m.Mat;m.cvtColor(e,e,m.COLOR_RGB2GRAY,0),m.Canny(e,t,50,100,3,!1),m.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.houghLineTransformation=function(){this.loadOriginalCanvas();var e=m.imread(this.image),t=m.Mat.zeros(e.rows,e.cols,m.CV_8UC3),a=new m.Mat;m.cvtColor(e,e,m.COLOR_RGBA2GRAY,0),m.Canny(e,e,50,200,3),m.HoughLines(e,a,1,Math.PI/180,30,0,0,0,Math.PI);for(var n=0;n<a.rows;++n){var i=a.data32F[2*n],o=a.data32F[2*n+1],r=Math.cos(o),s=Math.sin(o),c=r*i,l=s*i,d={x:c-1e3*s,y:l+1e3*r},g={x:c+1e3*s,y:l-1e3*r};m.line(t,d,g,[255,0,0,255])}m.imshow("image_canvas",t),e.delete(),t.delete(),a.delete()},h.prototype.dft=function(){this.loadOriginalCanvas();var e=m.imread(this.image);m.cvtColor(e,e,m.COLOR_RGBA2GRAY,0);var t=m.getOptimalDFTSize(e.rows),a=m.getOptimalDFTSize(e.cols),n=m.Scalar.all(0),i=new m.Mat;m.copyMakeBorder(e,i,0,t-e.rows,0,a-e.cols,m.BORDER_CONSTANT,n);var o=new m.Mat;i.convertTo(o,m.CV_32F);var r=new m.MatVector,s=new m.Mat,c=new m.Mat.zeros(i.rows,i.cols,m.CV_32F);r.push_back(o),r.push_back(c),m.merge(r,s),m.dft(s,s),m.split(s,r),m.magnitude(r.get(0),r.get(1),r.get(0));var l=r.get(0),d=new m.Mat.ones(l.rows,l.cols,l.type());m.add(l,d,l),m.log(l,l);var g=new m.Rect(0,0,-2&l.cols,-2&l.rows),h=(l=l.roi(g)).cols/2,u=l.rows/2,v=new m.Mat,p=new m.Rect(0,0,h,u),f=new m.Rect(h,0,h,u),w=new m.Rect(0,u,h,u),y=new m.Rect(h,u,h,u),C=l.roi(p),E=l.roi(f),_=l.roi(w),b=l.roi(y);C.copyTo(v),b.copyTo(C),v.copyTo(b),E.copyTo(v),_.copyTo(E),v.copyTo(_),m.normalize(l,l,0,1,m.NORM_MINMAX),m.imshow("image_canvas",l),e.delete(),i.delete(),r.delete(),s.delete(),d.delete(),v.delete()},h.prototype.otsu=function(){this.loadOriginalCanvas(),console.log(m);var e=m.imread(this.image);m.cvtColor(e,e,m.COLOR_RGB2GRAY,0);var t=new m.Mat;m.threshold(e,t,0,12,m.THRESH_OTSU),m.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.blurByAveraging=function(){var e=m.imread(this.image),t=new m.Mat,a=new m.Size(10,10),n=new m.Point(-1,-1);m.blur(e,t,a,n,m.BORDER_DEFAULT),m.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.gaussianBlur=function(){var e=m.imread(this.image),t=new m.Mat,a=new m.Size(3,3);m.GaussianBlur(e,t,a,0,0,m.BORDER_DEFAULT),m.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.medianBlurring=function(){var e=m.imread(this.image),t=new m.Mat;m.medianBlur(e,t,5),m.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.negative=function(){var e=m.imread(this.image),t=new m.Mat;m.bitwise_not(e,t),m.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.histogram=function(){var e=m.imread(this.image);m.cvtColor(e,e,m.COLOR_RGBA2GRAY,0);var t=new m.MatVector;t.push_back(e);var a=[256],n=new m.Mat,i=new m.Mat,o=new m.Scalar(255,255,255);m.calcHist(t,[0],i,n,a,[0,255],!1);for(var r=m.minMaxLoc(n,i).maxVal,s=new m.Mat.zeros(e.rows,2*a[0],m.CV_8UC3),c=0;c<a[0];c++){var l=n.data32F[c]*e.rows/r,d=new m.Point(2*c,e.rows-1),g=new m.Point(2*(c+1)-1,e.rows-l);m.rectangle(s,d,g,o,m.FILLED)}m.imshow("image_canvas",s),e.delete(),s.delete(),t.delete(),i.delete(),n.delete()},h.prototype.crop=function(){var e=m.imread(this.image),t=new m.Mat,a=new m.Rect(80,80,100,100);t=e.roi(a),m.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.action=function(e,t){if(""!=this.image.src)switch(e){case"Original":this.loadOriginalCanvas();break;case"Grayscale":this.grayscale();break;case"Median Blur":this.medianBlurring();break;case"Gaussian Blur":this.gaussianBlur();break;case"Blur By Average":this.blurByAveraging();break;case"Canny Edge Detection":this.cannyEdgeDetection();break;case"Hough Line Transformation":this.houghLineTransformation();break;case"Discrete Fourier Transformation":this.dft();break;case"Otsu's Segmentation":this.otsu();break;case"Histogram":this.histogram();break;case"Filter":this.filter();break;case"Crop":this.crop();break;case"Negative":this.negativeCanvas();break;case"Contrast":this.contrastCanvas(t);break;case"Logarithm Transform":this.logTransform();break;case"Brightness":this.brightnessCanvas(t);break;case"Flip Horizontal":case"Mirror":this.flip(!0,!1);break;case"Flip Vertical":this.flip(!1,!0);break;case"Flip Horizontal and Vertical":this.flip(!0,!0)}};var u=h,v=a(13),p=a.n(v),f=a(20),w=a(4),y={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},C=function(e){return i.a.createElement("div",{id:"camera",style:y},i.a.createElement("video",{id:"video",width:"720",height:"560",autoPlay:!0,muted:!0}),i.a.createElement("p",{onClick:e.goBack,style:{fontSize:"12px",fontFamily:"Source Sans Pro, Sans Serif",cursor:"pointer"}},"Go Back to home"))},E=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.startDetection()}},{key:"render",value:function(){return i.a.createElement(C,{goBack:this.props.goBack})}}]),t}(i.a.Component);E.prototype.startDetection=function(){var e=document.getElementById("video");Promise.all([w.f.tinyFaceDetector.loadFromUri("./models"),w.f.faceLandmark68Net.loadFromUri("./models"),w.f.faceRecognitionNet.loadFromUri("./models"),w.f.faceExpressionNet.loadFromUri("./models")]).then((function(){navigator.getUserMedia({video:{}},(function(t){return e.srcObject=t}),(function(e){return console.error(e)}))})),e.addEventListener("play",(function(){var t=w.b(e);t.setAttribute("id","face-detection-canvas"),document.getElementById("camera").append(t);var a={width:e.width,height:e.height};w.e(t,a),setInterval(Object(f.a)(p.a.mark((function n(){var i,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.c(e,new w.a);case 2:i=n.sent,o=w.g(i,a),t.getContext("2d").clearRect(0,0,t.width,t.height),w.d.drawDetections(t,o);case 6:case"end":return n.stop()}}),n)}))),100)}))};var _=E,b=["Original","Grayscale","Canny Edge Detection","Hough Line Transformation","Discrete Fourier Transformation","Face Detection","Otsu's Segmentation","Filter","Negative","Median Blur","Gaussian Blur","Blur By Average","Histogram","Mirror","Crop","Logarithm Transform","Flip Horizontal","Flip Vertical","Flip Horizontal and Vertical"],B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){if("Face Detection"==e.target.value)return console.log("Detect Faces"),a.setState({detect_faces:!0}),0;a.ocv.action(e.target.value)},a.goBack=function(){a.setState({detect_faces:!1})},a.handleSlider=function(e,t){console.log(e.target.value,t),a.ocv.action(t,e.target.value)},a.state={detect_faces:!1},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.ocv=new u("image_input","file_input","image_canvas"),this.ocv.addListener()}},{key:"componentWillUnmount",value:function(){this.ocv.removeListener()}},{key:"render",value:function(){return this.state.detect_faces?i.a.createElement(_,{goBack:this.goBack}):i.a.createElement(O,{handleChange:this.handleChange,handleSlider:this.handleSlider})}}]),t}(i.a.Component),O=function(e){return i.a.createElement("div",{id:"app_container"},i.a.createElement("div",{className:"image_closet"},i.a.createElement("img",{id:"image_input"}),i.a.createElement("video",{id:"video",width:"300",height:"300",style:{display:"none"}}),i.a.createElement("input",{type:"file",id:"file_input"})),i.a.createElement("div",{className:"canvas_ground"},i.a.createElement("div",{className:"canvas"},i.a.createElement("canvas",{id:"image_canvas"}),i.a.createElement("div",null,i.a.createElement("label",null,"Brightness"),i.a.createElement("input",{type:"range",min:"0",max:"300",className:"slider",id:"myRange",onChange:function(t){return e.handleSlider(t,"Brightness")}})),i.a.createElement("div",null,i.a.createElement("label",null,"Contrast"),i.a.createElement("input",{type:"range",min:"-100",max:"100",className:"slider",id:"myRange",onChange:function(t){return e.handleSlider(t,"Contrast")}}))),i.a.createElement("div",{className:"image_processing"},i.a.createElement("h1",null,"Image Processing"),i.a.createElement("div",{className:"action_menu"},b.map((function(t,a){return i.a.createElement("div",{key:a},i.a.createElement("input",{type:"radio",name:"action",value:t,onChange:e.handleChange}),i.a.createElement("label",null,t))}))))))},M=B;r.a.render(i.a.createElement(M,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.1ff7ffa0.chunk.js.map